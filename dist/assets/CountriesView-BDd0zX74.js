import{_ as e,u as a,o as s,c as t,a as l,b as o,d as r,r as n,e as i,f as c,g as u,h as d,w as m,v as p,F as g,i as v,j as b,T as h,k as f,l as y,m as x,n as _,p as w,q as N,t as k,s as C,x as j}from"./index-CNUfd2IP.js";const D={class:"p-6 pb-24 md:pb-6"},M={class:"mb-8"},V={class:"text-3xl font-bold mb-6 flex items-center gap-3"},B={class:"flex flex-col md:flex-row gap-4 justify-between items-start md:items-center"},F={class:"flex gap-3 w-full max-w-md"},q={class:"flex items-center bg-[#282828] rounded-full px-4 py-2 border border-transparent hover:border-gray-700 transition-colors"},z=["value"],L={key:0,class:"flex justify-center items-center py-20"},A={key:1},I={class:"w-16 h-12 mb-3 bg-black/20 rounded shadow-sm overflow-hidden flex items-center justify-center relative"},U=["src","alt"],Z={class:"font-medium text-center text-sm mb-1 group-hover:text-primary line-clamp-2"},P={class:"text-xs text-gray-500"},R={key:2,class:"text-center py-20 text-gray-500"},T=e({__name:"CountriesView",setup(e){const T=a(),$=_(),E=y(""),G=y("count_desc"),H=[{label:"Nombre (A-Z)",value:"name_asc"},{label:"Nombre (Z-A)",value:"name_desc"},{label:"Más estaciones",value:"count_desc"},{label:"Menos estaciones",value:"count_asc"}];s(()=>{0===T.availableCountries.length&&T.fetchFilters()});const J=()=>{const e=T.availableCountries.filter(e=>e.stationcount>0);if(0===e.length)return;const a=e[Math.floor(Math.random()*e.length)];$.push({name:"country-stations",params:{name:a.name||"uncategorized"},query:{iso:a.iso_3166_1}})},K=new Intl.DisplayNames(["es"],{type:"region"}),O=x(()=>{const e=E.value.toLowerCase();return T.availableCountries.map(e=>{let a=e.name;if(e.iso_3166_1)try{a=K.of(e.iso_3166_1)}catch(s){}return{...e,displayName:a||"Resto del Mundo",originalName:e.name,hasFlag:!!e.iso_3166_1}}).filter(a=>!(e&&!a.displayName.toLowerCase().includes(e))&&a.stationcount>0).sort((e,a)=>{switch(G.value){case"name_asc":return e.displayName.localeCompare(a.displayName);case"name_desc":return a.displayName.localeCompare(e.displayName);case"count_desc":return a.stationcount-e.stationcount;case"count_asc":return e.stationcount-a.stationcount;default:return 0}})});return(e,a)=>{const s=w("router-link");return N(),t("div",D,[l("header",M,[l("h1",V,[o(r(n),{class:"w-8 h-8 text-primary"}),a[2]||(a[2]=i(" Países ",-1))]),l("div",B,[l("div",F,[o(c,{modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),placeholder:"Buscar país...",class:"flex-1"},null,8,["modelValue"]),l("button",{onClick:J,class:"bg-white/10 hover:bg-white/20 p-3 rounded-full transition-colors group border border-transparent hover:border-[#1DB954] flex-shrink-0",title:"Descubrir país aleatorio"},[o(r(u),{class:"w-5 h-5 text-[#1DB954] group-hover:scale-110 transition-transform"})])]),l("div",q,[o(r(d),{class:"w-5 h-5 text-[#1DB954] mr-2"}),m(l("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>G.value=e),class:"bg-transparent text-white text-sm font-bold outline-none cursor-pointer appearance-none"},[(N(),t(g,null,v(H,e=>l("option",{key:e.value,value:e.value,class:"bg-[#282828]"},k(e.label),9,z)),64))],512),[[p,G.value]])])])]),r(T).loading&&0===r(T).availableCountries.length?(N(),t("div",L,[...a[3]||(a[3]=[l("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"},null,-1)])])):(N(),t("div",A,[o(h,{tag:"div",name:"list",class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},{default:b(()=>[(N(!0),t(g,null,v(O.value,(e,a)=>(N(),C(s,{key:e.originalName||"unknown",to:{name:"country-stations",params:{name:e.originalName||"uncategorized"},query:{iso:e.iso_3166_1}},class:"bg-[#181818] rounded-md p-4 flex flex-col items-center hover:bg-[#282828] transition-all duration-300 group cursor-pointer shadow-md hover:shadow-xl hover:scale-105 active:scale-95",style:j({animationDelay:50*Math.min(a,10)+"ms"})},{default:b(()=>{return[l("div",I,[e.hasFlag?(N(),t("img",{key:0,src:(a=e.iso_3166_1,a?`https://flagcdn.com/w80/${a.toLowerCase()}.png`:null),alt:e.displayName,class:"w-full h-full object-cover",loading:"lazy"},null,8,U)):(N(),C(r(n),{key:1,class:"w-8 h-8 text-gray-600"}))]),l("h3",Z,k(e.displayName),1),l("span",P,k(e.stationcount)+" estaciones",1)];var a}),_:2},1032,["to","style"]))),128))]),_:1})])),r(T).loading||0!==O.value.length?f("",!0):(N(),t("div",R," No se encontraron países. "))])}}},[["__scopeId","data-v-08a4742b"]]);export{T as default};

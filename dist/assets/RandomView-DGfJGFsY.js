import{u as e,C as a,D as t,o as l,c as s,a as r,b as o,d as n,g as i,e as u,w as c,E as d,G as v,H as p,F as g,i as x,k as b,t as h,x as f,s as m,I as y,J as w,K as k,L as F,M as C,N as j,O as R,P as S,Q as A,A as z,l as E,m as M,n as V,q as D}from"./index-COmcFCc2.js";const L={class:"p-6 pb-24 min-h-screen"},P={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},$={class:"text-gray-400 hover:text-white flex items-center gap-2 self-start md:self-auto"},_={class:"relative"},q={key:0,class:"absolute top-full left-0 right-0 bg-[#222] mt-2 rounded-lg shadow-xl overflow-hidden border border-gray-700 max-h-80 overflow-y-auto"},I={key:0},K=["onClick"],O=["src"],T={class:"flex-1 overflow-hidden"},U={class:"text-white text-sm font-bold truncate"},B={key:0,class:"flex justify-center items-center h-64"},N={key:1,class:"text-center py-20"},G={class:"text-2xl font-bold text-red-500 mb-4"},H={key:2},J={class:"flex flex-col md:flex-row gap-8 items-center md:items-end bg-gradient-to-b from-gray-800/50 to-transparent p-6 rounded-xl relative overflow-hidden"},Q={class:"relative z-10 w-52 h-52 shadow-2xl shrink-0 group"},W=["src"],X={class:"flex-1 text-center md:text-left relative z-10"},Y={class:"text-4xl md:text-6xl font-bold text-white mt-2 mb-4 drop-shadow-lg"},Z={class:"text-gray-300 text-lg mb-6"},ee={class:"flex gap-2 mb-6 text-sm text-gray-400 justify-center md:justify-start flex-wrap"},ae={class:"flex flex-wrap items-center justify-center md:justify-start gap-4"},te={class:"font-bold"},le=["disabled"],se={class:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4"},re={class:"bg-[#181818] p-4 rounded-lg"},oe={class:"text-xl font-bold"},ne={class:"bg-[#181818] p-4 rounded-lg"},ie={class:"text-xl font-bold"},ue={class:"bg-[#181818] p-4 rounded-lg"},ce={class:"text-xl font-bold"},de={class:"bg-[#181818] p-4 rounded-lg truncate"},ve=["href"],pe={__name:"RandomView",setup(pe){const ge=V(),xe=e(),be=a(),he=E(null),fe=E(!1),me=E(null),ye=E(""),we=E(!1),ke=E([]),Fe=E(null);let Ce;t(Fe,()=>{we.value=!1});const je=async()=>{if(!(ye.value.length<2))try{const e=await z.searchStations({name:ye.value,limit:5});ke.value=e,we.value=!0}catch(e){}},Re=e=>{ye.value=e.target.value,Ce&&clearTimeout(Ce),ye.value.length<2?we.value=!1:Ce=setTimeout(je,500)},Se=()=>{ge.push({name:"search",query:{q:ye.value}}),we.value=!1},Ae=async()=>{fe.value=!0,me.value=null;try{const e=await z.searchStations({limit:50,hidebroken:!0});if(e.length>0){const a=Math.floor(Math.random()*e.length);he.value=e[a]}else me.value="No se encontraron estaciones aleatorias."}catch(e){me.value="Error al cargar estación aleatoria."}finally{fe.value=!1}},ze=M(()=>he.value&&be.currentStation?.stationuuid===he.value.stationuuid&&be.isPlaying),Ee=M(()=>he.value&&xe.isFavorite(he.value.stationuuid)),Me=M(()=>he.value&&xe.hasVoted(he.value.stationuuid)),Ve=()=>{he.value&&be.playStation(he.value)},De=()=>{he.value&&xe.toggleFavorite(he.value)},Le=async()=>{if(he.value){const e=await xe.voteForStation(he.value);"added"===e?he.value.votes=(he.value.votes||0)+1:"removed"===e&&(he.value.votes=Math.max(0,(he.value.votes||0)-1))}},Pe=()=>{Ae()},$e=e=>{e.target.src="https://placehold.co/300x300/282828/FFF?text=Radio"};return l(()=>{Ae()}),(e,a)=>(D(),s("div",L,[r("div",P,[r("div",$,[o(n(i),{class:"w-5 h-5 text-primary"}),a[3]||(a[3]=u(" Estación Aleatoria ",-1))]),r("div",{class:"relative w-full md:w-1/3 z-20",ref_key:"searchContainer",ref:Fe},[r("div",_,[c(r("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>ye.value=e),onInput:Re,onKeyup:v(Se,["enter"]),onKeydown:a[1]||(a[1]=v(e=>we.value=!1,["esc"])),placeholder:"Buscar emisora...",class:"w-full bg-[#282828] text-white pl-10 pr-4 py-2 rounded-full focus:ring-2 focus:ring-green-500 outline-none transition-all"},null,544),[[d,ye.value]]),o(n(p),{class:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})]),we.value&&ye.value.length>=2?(D(),s("div",q,[ke.value.length>0?(D(),s("div",I,[(D(!0),s(g,null,x(ke.value,e=>(D(),s("div",{key:e.stationuuid,onClick:a=>(e=>{be.playStation(e),we.value=!1,ye.value="";const a=e.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");ge.push(`/station/${a}-${e.stationuuid}`)})(e),class:"p-3 hover:bg-[#333] cursor-pointer flex items-center gap-3 transition-colors border-b border-gray-800 last:border-0"},[r("img",{src:e.favicon||"https://placehold.co/100x100/282828/FFF?text=R",class:"w-8 h-8 rounded object-cover bg-black"},null,8,O),r("div",T,[r("h4",U,h(e.name),1)])],8,K))),128))])):b("",!0)])):b("",!0)],512)]),fe.value&&!he.value?(D(),s("div",B,[...a[4]||(a[4]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"},null,-1)])])):me.value?(D(),s("div",N,[o(n(i),{class:"w-16 h-16 text-gray-600 mx-auto mb-4"}),r("h2",G,h(me.value),1),r("button",{onClick:Pe,class:"px-6 py-2 bg-primary hover:bg-green-600 text-black font-bold rounded-full"}," Descubrir Estación ")])):he.value?(D(),s("div",H,[r("div",J,[r("div",{class:"absolute inset-0 z-0 opacity-20 pointer-events-none",style:f({background:`url(${he.value.favicon}) center/cover`})},null,4),a[7]||(a[7]=r("div",{class:"absolute inset-0 bg-gradient-to-b from-[#121212]/50 to-[#121212] z-0"},null,-1)),r("div",Q,[r("img",{src:he.value.favicon||"https://placehold.co/300x300/282828/FFF?text=Radio",onError:$e,alt:"Station Logo",class:"w-full h-full object-cover rounded-lg"},null,40,W)]),r("div",X,[a[6]||(a[6]=r("span",{class:"text-xs font-bold uppercase tracking-wider text-green-500"},"Radio Station Aleatoria",-1)),r("h1",Y,h(he.value.name),1),r("p",Z,h(he.value.country)+" • "+h(he.value.language),1),r("div",ee,[(D(!0),s(g,null,x(he.value.tags.split(",").slice(0,5),e=>(D(),s("span",{key:e,class:"bg-white/10 px-2 py-1 rounded"},h(e.trim()),1))),128))]),r("div",ae,[r("button",{onClick:Ve,class:"bg-green-500 text-black rounded-full p-4 hover:scale-105 transition-transform hover:bg-green-400 flex items-center gap-2 font-bold px-8 shadow-lg shadow-green-500/20"},[(D(),m(y(ze.value?n(w):n(k)),{class:"w-6 h-6"})),u(" "+h(ze.value?"PAUSAR":"REPRODUCIR"),1)]),r("button",{onClick:De,class:F(["p-3 rounded-full border border-gray-500 hover:border-white text-gray-400 hover:text-white transition-colors",{"!text-green-500 !border-green-500":Ee.value}]),title:"Favoritos"},[(D(),m(y(Ee.value?n(C):n(j)),{class:"w-6 h-6"}))],2),r("button",{onClick:a[2]||(a[2]=e=>n(xe).openAddModal(he.value)),class:"p-3 rounded-full border border-gray-500 hover:border-white text-gray-400 hover:text-white transition-colors",title:"Agregar a Lista"},[o(n(R),{class:"w-6 h-6"})]),r("button",{onClick:Le,class:F(["flex items-center gap-2 p-3 rounded-full border border-gray-500 hover:border-white text-gray-400 hover:text-white transition-all duration-300 hover:scale-110 active:scale-95",{"!text-blue-500 !border-blue-500 bg-blue-500/10":Me.value}]),title:"Votar"},[(D(),m(y(Me.value?n(S):n(A)),{class:"w-6 h-6"})),r("span",te,h(he.value.votes),1)],2),r("button",{onClick:Pe,disabled:fe.value,class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold rounded-full transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-500/20"},[o(n(i),{class:F(["w-5 h-5",{"animate-spin":fe.value}])},null,8,["class"]),a[5]||(a[5]=u(" Descubrir Otra ",-1))],8,le)])])]),r("div",se,[r("div",re,[a[8]||(a[8]=r("span",{class:"text-gray-400 text-xs uppercase"},"Bitrate",-1)),r("p",oe,h(he.value.bitrate)+" kbps",1)]),r("div",ne,[a[9]||(a[9]=r("span",{class:"text-gray-400 text-xs uppercase"},"Votos Totales",-1)),r("p",ie,h(he.value.votes),1)]),r("div",ue,[a[10]||(a[10]=r("span",{class:"text-gray-400 text-xs uppercase"},"Codec",-1)),r("p",ce,h(he.value.codec),1)]),r("div",de,[a[11]||(a[11]=r("span",{class:"text-gray-400 text-xs uppercase"},"Web",-1)),r("a",{href:he.value.homepage,target:"_blank",class:"text-green-500 hover:underline block truncate"},h(he.value.homepage),9,ve)])])])):b("",!0)]))}};export{pe as default};
